
Session ID Bible
=============================================

.. note:: This is bound to become outdated as Team Amino is releasing an security update to address the libraries existence. I will include an warning in a timely manner if this happens. 

:subscript:`I blatantly copy pasted this from okok#7711, he wrote all of this.`

`Download to original <https://cdn.discordapp.com/attachments/715911730550800517/851555290577895456/SID_Bible.docx>`_

Info
----
| The session ID is generated, server-sided, when the User logs in. 
| It’s a Base64 URL encoded String. It contains the IP address, user ID, device type and other keys. 
| It starts with the SID version (02) and ends with a sha1 signature of the session id content. The session ID allows the user to make authenticated requests. 
| Amino always used session IDs, however the current session ID system is new.

Generating
----------
The session ID is generated by creating a JSON Object with the keys 0 through 6.

| The Mappings are as following:
| 0: 2
| 1: null,
| 2: UserID of the User,
| 3: 0,
| 4: Public IP Address,
| 5: SID creation time,
| 6: Client Type 

This JSON Object is appended to the \\x02 starting byte which stands for the Session ID generation Version. At the end a 20-byte SHA1 signature hash is appended to verify a session ID’s authenticity

Safety
----------
Amino validates the session IDs server-sided. If the SHA1 signature is missing or wrong, it will throw an Exception.
Amino will also check if the session has not expired. Else, an Exception will also be thrown.

Examples
----------
.. code-block:: 

 AnsiMSI6IG51bGwsICIwIjogMiwgIjMiOiAwLCAiMiI6ICJ4eDk2eHg1NS1keHg3LTRhNTItYnh4Mi1hYmJkeHgxOTZkZWMiLCAiNSI6IDE2MTh4eDIwMTQsICI0

 IjogInh4Lnh4eC54eC54eCIsICI2IjogMTAwfWRi4bvQMbDsCat8iIYorWokDIZ4

Old Session IDs
---------------
In old versions of the Session ID was an integer or a long instead of the String it now is. Back when Amino Session IDs were a Long, they were generated client-sided. 

The old Session ID was too unsecure so Amino created the now used Session ID V2. Old Session IDs will no longer work with Amino Servers.

Replicating
-----------
Replicating the Amino Session ID is most likely impossible since Amino does check if a session is valid. If however Amino wouldn’t check whether the session is a valid session, all that’s needed to replicate a Session ID is the key they use to generate the SHA1 signature with. 

Because Amino does all of this server-sided the chances of actually finding the key are slim. They also might use HMACSHA1 or other encryption/decryption mechanisms in order to create the key. If someone were to find the key they’d only have to enter the valid JSON parameters and hash the JSON Object.